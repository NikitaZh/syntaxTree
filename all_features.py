# -*- coding: utf8 -*-
from saText import *
from NPinSnips import *
from features_extracting import *


chains = [['своего', [['Ванька с Танькой', '0'], ['Иван Тихонович и Татьяна Финогеновна Заплатины', '34'], ['своего', '126'], ['них', '151'], ['они', '324'], ['Иван Тихонович и Татьяна Финогеновна', '4584']]], ['них', [['Ванька с Танькой', '0'], ['Иван Тихонович и Татьяна Финогеновна Заплатины', '34'], ['своего', '126'], ['них', '151'], ['они', '324'], ['Иван Тихонович и Татьяна Финогеновна', '4584']]], ['они', [['Ванька с Танькой', '0'], ['Иван Тихонович и Татьяна Финогеновна Заплатины', '34'], ['своего', '126'], ['них', '151'], ['они', '324'], ['Иван Тихонович и Татьяна Финогеновна', '4584']]], ['он', [['старом речном картузе', '450'], ['Картуз', '508'], ['он', '588'], ['Картуз с сереющим на месте отколупнувшейся кокарды пятнышком', '722'], ['своей', '826']]], ['своей', [['старом речном картузе', '450'], ['Картуз', '508'], ['он', '588'], ['Картуз с сереющим на месте отколупнувшейся кокарды пятнышком', '722'], ['своей', '826']]], ['ее', [['вислую ветку березы', '1018'], ['ее', '1049']]], ['ему', [['волос', '1569'], ['ему', '1625']]], ['его', [['синеньком платочке', '1846'], ['платочка', '2112'], ['синий платочек', '2301'], ['почти отцветший платочек', '2366'], ['его', '2446']]], ['его', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['они', [['теплые слезы', '2543'], ['они', '2568']]], ['его', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['он', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['его', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['него', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['он', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['себе', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['дрова из столярного цеха', [['дрова из столярного цеха', '3445'], ['их', '3486']]], ['Я', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['их', [['дрова из столярного цеха', '3445'], ['их', '3486']]], ['них', [['два поросенка', '3555'], ['них', '3595']]], ['Она', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['он', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['ее', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['которому', [['том недоношенном мужском пиджаке', '4074'], ['которому', '4111'], ['им', '4171']]], ['им', [['том недоношенном мужском пиджаке', '4074'], ['которому', '4111'], ['им', '4171']]], ['свой', [['русские бабы', '4129'], ['свой', '4175']]], ['он', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['ей', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['свое', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['она', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['ее', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['она', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['Она', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['ему', [['Ванька', '0'], ['Иван Тихонович', '34'], ['Иван Тихонович', '418'], ['Ивана Тихоновича', '1280'], ['Ивану Тихоновичу', '2256'], ['Иван Тихонович', '2450'], ['его', '2478'], ['его', '2772'], ['он', '2837'], ['его', '2879'], ['его', '2946'], ['Ивана Тихоновича', '3133'], ['него', '3191'], ['он', '3315'], ['себе', '3327'], ['Я', '3484'], ['Иван Тихонович', '3521'], ['Ивана Тихоновича', '3798'], ['он', '4033'], ['Иван Тихонович', '4394'], ['Иван Тихонович', '4584'], ['Хозяин', '4737'], ['он', '4875'], ['Иван Тихонович', '5449'], ['ему', '5541']]], ['они', [['таблеток', '5763'], ['они', '5773'], ['них', '5802']]], ['ей', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['них', [['таблеток', '5763'], ['они', '5773'], ['них', '5802']]], ['ей', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]], ['она', [['Танькой', '9'], ['Татьяна Финогеновна', '52'], ['Татьяна Финогеновна', '1235'], ['Татьяна Финогеновна', '1915'], ['Татьяна Финогеновна', '1992'], ['Тани', '3944'], ['Татьяны Финогеновны', '3950'], ['Она', '3971'], ['ее', '4037'], ['Татьяна Финогеновна', '4603'], ['Татьяны же Финогеновны', '5006'], ['ей', '5140'], ['свое', '5171'], ['она', '5353'], ['ее', '5399'], ['она', '5416'], ['супругу', '5488'], ['Она', '5537'], ['Татьяна Финогеновна', '5675'], ['ей', '5781'], ['ей', '5856'], ['она', '5952']]]]

id = '5'
text = '2_astafiev_zhizn_prozhit.conll'
text2write = 'vectors.txt'
def doc_features(conll_text, chains, id, txt2wr8):
    raw_sentences = parse_saText(conll_text)
    shifts = get_shift_info(raw_sentences, get_shifts(get_ids_text('Tokens.txt', id)))
    snips = pronoun_snips(raw_sentences)
    if len(snips) != len(chains):
        print('ERROR')
    for s in range(len(snips)):
        #pron = snips[s][-2][int(snips[s][-1])-1]
        nps = get_noun_phrases(snips[s])
        vectors = get_features(snips[s], nps, conll_text, chains[s][1])
        print(s)
        for q in vectors:
            print(q)
        

doc_features(text, chains, id)
